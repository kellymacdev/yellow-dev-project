{% extends "yellow_backend/layout.html" %}
{% load static %}



{% block title %}Apply for a Smartphone Loan{% endblock %}

{% block content %}
<h1>Apply for a Smartphone Loan</h1>

<form id="loan-application-form" enctype="multipart/form-data">
{% csrf_token %}

    <!-- STEP 1: Personal info -->
    <section id="step-personal" class="form-step">
        <h2>Your details</h2>

        <label>
            Full name
            <input type="text" id="full-name" required />
        </label>

        <label>
            South African ID number
            <input type="text" id="id-number" maxlength="13" inputmode="numeric" required />
        </label>

        <div id="id-error" class="error-message hidden"></div>


        <label>
            Birth date
            <input type="date" id="birthday" min="1925-01-01" max="2025-12-19" required />
        </label>

        <div id="birthday-errors" class="error"></div>

        <div id="birthday-error" class="error-message hidden"></div>
        <div id="age-error" class="error-message hidden"></div>
    </section>

    <!-- STEP 2: Income -->
    <section id="step-income" class="form-step hidden">
        <h2>Your income</h2>

        <label>
            Monthly income (ZAR)
            <input type="number" id="monthly-income" min="0" step="0.01" required />
        </label>

        <label>
            Proof of income
            <input type="file" id="proof-document" accept=".pdf,.jpg,.jpeg,.png" required />
        </label>

        <div id="income-errors" class="error"></div>
    </section>

    <!-- STEP 3: Phone selection -->
    <section id="step-phone" class="form-step hidden">
    <label for="phone-select">Select a phone:</label>
    <select id="phone-select">
        <option value="">-- Choose a phone --</option>
    </select>

    <div id="phone-loan-info" class="hidden">
        <p class="info-heading">Cash Price:</p>
        <p class="info">
            The market price for this phone. This price must be confirmed with both the merchant and customer. 
            The actual amount charged by the merchant may vary.</p>
        <p> R<span id="loan-cash-price"></span></p>

        <p class="info-heading">Deposit percent:</p>
        <p><span id="loan-deposit-percent"></span>%</p>
        <p class="info-heading">Deposit amount:</p>
        <p>R<span id="loan-deposit-amount"></span></p>
        <p class="info-heading">Remaining loan amount:</p>
        <p>R<span id="loan-principal"></span></p>
        <!--<p>Interest Rate: <span id="loan-interest-rate"></span>%</p>-->
        <p class="info-heading">Payments: </p>
        <p>R<span id="daily-payment"></span> every day for 360 days</p>
        <p class="info-heading">Total Price:</p>
        <p>R<span id="loan-amount"></span></p>
        
    </div>
    </section>

    <!-- STEP 4: Review & submit -->
    <section id="step-submit" class="form-step hidden">
        <h2>Review & submit</h2>

        <div id="application-summary"></div>

        <button type="submit">Submit application</button>
    </section>

</form>

<div id="form-errors"></div>
{% endblock %}
